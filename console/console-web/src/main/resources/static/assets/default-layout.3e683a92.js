import{u as Q,_ as F,a as Ce,b as oe,c as A,d as $e,l as ae,s as W,e as we,f as Y,R as Se,D as De,r as Le}from"./index.70bdb397.js";import{aV as se,b1 as Me,B as v,aD as C,aK as w,c as x,d as z,e as E,aH as o,b2 as Ie,b3 as Ee,h as q,b4 as ee,b5 as Te,b6 as Re,C as B,aG as s,aJ as H,aI as G,b7 as Be,aM as O,aN as T,b8 as Fe,b9 as ze,i as Ae,F as g,u as m,aE as R,ba as Pe,bb as Ue,aW as Ne,bc as je,bd as Oe,be as ce,bf as ue,bg as Ve,D as re,bh as Ke,bi as ie,bj as le,w as de,bk as qe,bl as We,o as pe,bm as He,b as Ge,bn as te,bo as Je,bp as Qe,bq as Ye,br as Xe,E as ne,bs as Ze,aY as et,bt as tt,bu as nt,p as ot}from"./arco.46b62ede.js";import{f as V,g as X,h as at,i as st,j as ct,k as ut}from"./vue.4bab78c1.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{l as rt}from"./lodash.3de52daf.js";/* empty css               */import{g as it}from"./url.f47a0375.js";import{e as _e}from"./base.3c7b4f95.js";import{g as lt}from"./app.fdbaf873.js";import"./chart.42ea7243.js";function dt(){const a=V(),n=Q();return{logout:async r=>{await n.logout();const i=a.currentRoute.value;se.success("\u767B\u51FA\u6210\u529F"),a.push({name:r&&typeof r=="string"?r:"login",query:{...a.currentRoute.value.query,redirect:i.name}})}}}const pt=(a,n)=>{const{target:e="_blank",...r}=n||{};window.open(a,e,Object.entries(r).reduce((i,b)=>{const[u,_]=b;return[...i,`${u}=${_}`]},[]).join(","))},_t=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),ft=Me.addFromIconFontCn({src:"https:////at.alicdn.com/t/c/font_3888137_p3352i69wd.js"}),ht={components:{IconFont:ft},props:{type:String,size:{type:Number,default:18}}};function mt(a,n,e,r,i,b){const u=w("icon-font");return v(),C(u,{type:e.type,size:e.size},null,8,["type","size"])}const fe=F(ht,[["render",mt]]),vt=[...Ce],gt=vt.map(a=>{const{name:n,path:e,meta:r,redirect:i,children:b}=a;return{name:n,path:e,meta:r,redirect:i,children:b}}),bt=gt;function yt(){const a=oe(),n=A(),e=x(()=>n.menuFromServer?n.appAsyncMenus:bt);return{menuTree:x(()=>{const i=rt.exports.cloneDeep(e.value);i.sort((u,_)=>(u.meta.order||0)-(_.meta.order||0));function b(u,_){return u?u.map(h=>{var S,D;if(!a.accessRouter(h))return null;if(((S=h.meta)==null?void 0:S.hideChildrenInMenu)||!h.children)return h.children=[],h;h.children=h.children.filter(d=>{var l;return((l=d.meta)==null?void 0:l.hideInMenu)!==!0});const $=b(h.children,_+1);return $.length||_>1?(h.children=$,h):((D=h.meta)==null?void 0:D.hideInMenu)===!1?h:null}).filter(Boolean):null}return b(i,0)})}}function xt(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!Ee(a)}const kt=z({emit:["collapse"],setup(){const{t:a}=$e(),n=A(),e=V(),r=X(),{menuTree:i}=yt(),b=x({get(){return n.device==="desktop"?n.menuCollapse:!1},set(d){n.updateSettings({menuCollapse:d})}}),u=x(()=>n.topMenu),_=E([]),y=E([]),h=d=>{if(_t.test(d.path)){pt(d.path),y.value=[d.name];return}const{hideInMenu:l,activeMenu:f}=d.meta;if(r.name===d.name&&!l&&!f){y.value=[d.name];return}e.push({name:d.name})},$=d=>{const l=[];let f=!1;const t=(c,p)=>{var M;if(c.name===d){f=!0,l.push(...p);return}(M=c.children)!=null&&M.length&&c.children.forEach(L=>{t(L,[...p,L.name])})};return i.value.forEach(c=>{f||t(c,[c.name])}),l};ae(d=>{const{requiresAuth:l,activeMenu:f,hideInMenu:t}=d.meta;if(l&&(!t||f)){const c=$(f||d.name),p=new Set([...c,..._.value]);_.value=[...p],y.value=[f||c[c.length-1]]}},!0);const S=d=>{n.device==="desktop"&&n.updateSettings({menuCollapse:d})},D=()=>{function d(l,f=[]){return l&&l.forEach(t=>{var M,L;let c=(M=t==null?void 0:t.meta)!=null&&M.icon?()=>{var k;return q(ee(`<${(k=t==null?void 0:t.meta)==null?void 0:k.icon}/>`))}:null;c&&((L=t==null?void 0:t.meta)==null?void 0:L.iconFont)&&(c=()=>{var k;return q(o(fe,{type:(k=t==null?void 0:t.meta)==null?void 0:k.icon},null))});const p=(t==null?void 0:t.children)&&(t==null?void 0:t.children.length)!==0?o(Te,{key:t==null?void 0:t.name},{default:()=>[d(t==null?void 0:t.children)],icon:c,title:()=>{var k;return q(ee(a(((k=t==null?void 0:t.meta)==null?void 0:k.locale)||"")))}}):o(Re,{key:t==null?void 0:t.name,onClick:()=>h(t)},{default:()=>{var k;return[a(((k=t==null?void 0:t.meta)==null?void 0:k.locale)||"")]},icon:c});f.push(p)}),f}return d(i.value)};return()=>{let d;return o(Ie,{mode:u.value?"horizontal":"vertical",collapsed:b.value,"onUpdate:collapsed":l=>b.value=l,"open-keys":_.value,"onUpdate:open-keys":l=>_.value=l,"show-collapse-button":n.device!=="mobile","auto-open":!1,"selected-keys":y.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%;width:100%;",onCollapse:S},xt(d=D())?d:{default:()=>[d]})}}});const J=F(kt,[["__scopeId","data-v-7773f00c"]]);function Ct(){return _e({url:"/main/base",method:"get"})}function $t(a,n){return _e({url:"/main/login",method:"get",params:{code:a,redirectUri:n}})}const wt={class:"container"},St={name:"AppSelect"},Dt=z({...St,setup(a){W.setUser("xiuzhu");const n=we(),e=E(W.getApp()),r=it(window.location.href),i=E([]);if(n.name==null){const u=encodeURIComponent(window.location.href);if(r==null||r.code===void 0)Ct().then(_=>{const y=`${_.data.sso_authorize}?client_id=${_.data.client_id}&redirect_uri=${u}&response_type=code`;window.location.href=y});else{const{code:_}=r;$t(_,u).then(y=>{n.userInfo.name=y.data.id,n.setInfo(n.userInfo)})}}else lt().then(u=>{i.value=u.data,e.value||(e.value=u.data[0].name)});const b=u=>{e.value=u,n.setInfo({appName:u,name:n.name})};return(u,_)=>{const y=Fe,h=ze,$=Be;return v(),B("div",wt,[o($,{style:{width:"200px"},placeholder:"\u8BF7\u9009\u62E9\u5E94\u7528","model-value":e.value,"allow-search":"",onChange:b},{default:s(()=>[(v(!0),B(H,null,G(i.value,S=>(v(),C(h,{key:S.id,label:S.name},{default:s(()=>[(v(!0),B(H,null,G(S.appList,D=>(v(),C(y,{key:D.id},{default:s(()=>[O(T(D.name),1)]),_:2},1024))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["model-value"])])}}}),Lt={class:"navbar"},Mt={class:"left-side"},It={style:{marginLeft:"20px"}},Et={class:"center-side"},Tt={class:"right-side"},Rt=["src"],Bt=z({__name:"index",setup(a){const n=E(W.getUser()),e=A(),r=Q(),{logout:i}=dt(),{isFullscreen:b,toggle:u}=at(),_=x(()=>r.avatar),y=x(()=>e.theme),h=x(()=>e.topMenu&&e.menu),$=st({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(c){e.toggleTheme(c)}}),S=ct($),D=()=>{S()},d=()=>{e.updateSettings({globalSettings:!0})},l=()=>{i()},f=async()=>{const c=await r.switchRoles();se.success(c)},t=Ae("toggleDrawerMenu");return(c,p)=>{const M=Pe,L=w("icon-menu-fold"),k=Ue,U=w("icon-moon-fill"),I=w("icon-sun-fill"),N=Ne,K=je,he=w("icon-fullscreen-exit"),me=w("icon-fullscreen"),Z=w("icon-settings"),ve=Oe,ge=w("icon-tag"),j=ce,be=w("icon-user"),ye=w("icon-export"),xe=ue;return v(),B("div",Lt,[g("div",Mt,[o(k,null,{default:s(()=>[o(fe,{type:"icon-youxuzidonghua",size:35}),o(M,{style:{margin:0,fontSize:"18px"},heading:5},{default:s(()=>[O(" CCTest ")]),_:1}),!m(h)&&m(e).device==="mobile"?(v(),C(L,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:m(t)},null,8,["onClick"])):R("",!0)]),_:1}),g("div",It,[o(Dt)])]),g("div",Et,[m(h)?(v(),C(J,{key:0})):R("",!0)]),g("ul",Tt,[g("li",null,[o(K,{content:m(y)==="light"?c.$t("settings.navbar.theme.toDark"):c.$t("settings.navbar.theme.toLight")},{default:s(()=>[o(N,{class:"nav-btn",type:"outline",shape:"circle",onClick:D},{icon:s(()=>[m(y)==="dark"?(v(),C(U,{key:0})):(v(),C(I,{key:1}))]),_:1})]),_:1},8,["content"])]),g("li",null,[o(K,{content:m(b)?c.$t("settings.navbar.screen.toExit"):c.$t("settings.navbar.screen.toFull")},{default:s(()=>[o(N,{class:"nav-btn",type:"outline",shape:"circle",onClick:m(u)},{icon:s(()=>[m(b)?(v(),C(he,{key:0})):(v(),C(me,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])]),g("li",null,[o(K,{content:c.$t("settings.title")},{default:s(()=>[o(N,{class:"nav-btn",type:"outline",shape:"circle",onClick:d},{icon:s(()=>[o(Z)]),_:1})]),_:1},8,["content"])]),g("li",null,[o(xe,{trigger:"click"},{content:s(()=>[o(j,null,{default:s(()=>[o(k,{onClick:f},{default:s(()=>[o(ge),g("span",null,T(c.$t("messageBox.switchRoles")),1)]),_:1})]),_:1}),o(j,null,{default:s(()=>[o(k,{onClick:p[0]||(p[0]=ke=>c.$router.push({name:"Info"}))},{default:s(()=>[o(be),g("span",null,T(c.$t("messageBox.userCenter")),1)]),_:1})]),_:1}),o(j,null,{default:s(()=>[o(k,{onClick:p[1]||(p[1]=ke=>c.$router.push({name:"Setting"}))},{default:s(()=>[o(Z),g("span",null,T(c.$t("messageBox.userSettings")),1)]),_:1})]),_:1}),o(j,null,{default:s(()=>[o(k,{onClick:l},{default:s(()=>[o(ye),g("span",null,T(c.$t("messageBox.logout")),1)]),_:1})]),_:1})]),default:s(()=>[o(ve,{size:32,style:{marginRight:"8px",cursor:"pointer"}},{default:s(()=>[g("img",{alt:"avatar",src:m(_)},null,8,Rt)]),_:1}),O(" "+T(n.value)+" ",1)]),_:1})])])])}}});const Ft=F(Bt,[["__scopeId","data-v-66120207"]]);const zt={};function At(a,n){const e=Ve;return v(),C(e,{class:"footer"},{default:s(()=>[O("CCTest \u81EA\u52A8\u5316\u6D4B\u8BD5")]),_:1})}const Pt=F(zt,[["render",At],["__scopeId","data-v-d0132cf2"]]);const P=a=>(ie("data-v-17257cfa"),a=a(),le(),a),Ut={class:"tag-link"},Nt=P(()=>g("span",null,"\u91CD\u65B0\u52A0\u8F7D",-1)),jt=P(()=>g("span",null,"\u5173\u95ED\u5F53\u524D\u6807\u7B7E\u9875",-1)),Ot=P(()=>g("span",null,"\u5173\u95ED\u5DE6\u4FA7\u6807\u7B7E\u9875",-1)),Vt=P(()=>g("span",null,"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E\u9875",-1)),Kt=P(()=>g("span",null,"\u5173\u95ED\u5176\u5B83\u6807\u7B7E\u9875",-1)),qt=P(()=>g("span",null,"\u5173\u95ED\u5168\u90E8\u6807\u7B7E\u9875",-1)),Wt=z({__name:"tab-item",props:{itemData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(a){const n=a,e=V(),r=X(),i=Y(),b=l=>{e.push({...l})},u=x(()=>i.getTabList),_=x(()=>n.itemData.fullPath!==r.fullPath),y=x(()=>n.index===0),h=x(()=>[0,1].includes(n.index)),$=x(()=>n.index===u.value.length-1),S=(l,f)=>{if(i.deleteTag(f,l),n.itemData.fullPath===r.fullPath){const t=u.value[f-1];e.push({name:t.name})}},D=()=>u.value.findIndex(l=>l.fullPath===r.fullPath),d=async l=>{const{itemData:f,index:t}=n,c=[...u.value];if(l==="current")S(f,t);else if(l==="left"){const p=D();c.splice(1,n.index-1),i.freshTabList(c),p<t&&e.push({name:f.name})}else if(l==="right"){const p=D();c.splice(n.index+1),i.freshTabList(c),p>t&&e.push({name:f.name})}else if(l==="others"){const p=u.value.filter((M,L)=>L===0||L===n.index);i.freshTabList(p),e.push({name:f.name})}else l==="reload"?(i.deleteCache(f),await e.push({name:Se,params:{path:r.fullPath}}),i.addCache(f.name)):(i.resetTabList(),e.push({name:De}))};return(l,f)=>{const t=w("icon-close"),c=w("icon-refresh"),p=ce,M=w("icon-to-left"),L=w("icon-to-right"),k=w("icon-swap"),U=w("icon-folder-delete"),I=ue;return v(),C(I,{trigger:"contextMenu","popup-max-height":!1,onSelect:d},{content:s(()=>[o(p,{disabled:m(_),value:"reload"},{default:s(()=>[o(c),Nt]),_:1},8,["disabled","value"]),o(p,{class:"sperate-line",disabled:m(y),value:"current"},{default:s(()=>[o(t),jt]),_:1},8,["disabled","value"]),o(p,{disabled:m(h),value:"left"},{default:s(()=>[o(M),Ot]),_:1},8,["disabled","value"]),o(p,{class:"sperate-line",disabled:m($),value:"right"},{default:s(()=>[o(L),Vt]),_:1},8,["disabled","value"]),o(p,{value:"others"},{default:s(()=>[o(k),Kt]),_:1},8,["value"]),o(p,{value:"all"},{default:s(()=>[o(U),qt]),_:1},8,["value"])]),default:s(()=>[g("span",{class:re(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":a.itemData.fullPath===l.$route.fullPath}]),onClick:f[1]||(f[1]=N=>b(a.itemData))},[g("span",Ut,T(l.$t(a.itemData.title)),1),g("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:f[0]||(f[0]=Ke(N=>S(a.itemData,a.index),["stop"]))},[o(t)])],2)]),_:1})}}});const Ht=F(Wt,[["__scopeId","data-v-17257cfa"]]),Gt=a=>(ie("data-v-509db106"),a=a(),le(),a),Jt={class:"tab-bar-container"},Qt={class:"tab-bar-box"},Yt={class:"tab-bar-scroll"},Xt={class:"tags-wrap"},Zt=Gt(()=>g("div",{class:"tag-bar-operation"},null,-1)),en=z({__name:"index",setup(a){const n=A(),e=Y(),r=E(),i=x(()=>e.getTabList),b=x(()=>n.navbar?60:0);return de(()=>n.navbar,()=>{r.value.updatePosition()}),ae(u=>{!u.meta.noAffix&&!i.value.some(_=>_.fullPath===u.fullPath)&&e.updateTabList(u)},!0),qe(()=>{Le()}),(u,_)=>{const y=We;return v(),B("div",Jt,[o(y,{ref_key:"affixRef",ref:r,"offset-top":m(b)},{default:s(()=>[g("div",Qt,[g("div",Yt,[g("div",Xt,[(v(!0),B(H,null,G(m(i),(h,$)=>(v(),C(Ht,{key:h.fullPath,index:$,"item-data":h},null,8,["index","item-data"]))),128))])]),Zt])]),_:1},8,["offset-top"])])}}});const tn=F(en,[["__scopeId","data-v-509db106"]]);function nn(a,n,e,r=!1){a.addEventListener&&typeof a.addEventListener=="function"&&a.addEventListener(n,e,r)}function on(a,n,e,r=!1){a.removeEventListener&&typeof a.removeEventListener=="function"&&a.removeEventListener(n,e,r)}const an=992;function sn(){return document.body.getBoundingClientRect().width-1<an}function cn(a){const n=A();function e(){if(!document.hidden){const i=sn();n.toggleDevice(i?"mobile":"desktop"),n.toggleMenu(i)}}const r=ut(e,100);pe(()=>{a&&r()}),He(()=>{nn(window,"resize",r)}),Ge(()=>{on(window,"resize",r)})}const un=z({__name:"page-layout",setup(a){const n=Y(),e=x(()=>n.getCacheList);return(r,i)=>{const b=w("router-view");return v(),C(b,null,{default:s(({Component:u,route:_})=>[o(Qe,{name:"fade",mode:"out-in",appear:""},{default:s(()=>[_.meta.ignoreCache?(v(),C(te(u),{key:_.fullPath})):(v(),C(Je,{key:1,include:m(e)},[(v(),C(te(u),{key:_.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}}),rn={key:0,class:"layout-navbar"},ln={class:"menu-wrapper"},dn=z({__name:"default-layout",setup(a){const n=E(!1),e=A(),r=Q(),i=V(),b=X(),u=oe();cn(!0);const _="60px",y=x(()=>e.navbar),h=x(()=>e.menu&&!e.topMenu),$=x(()=>e.hideMenu),S=x(()=>e.footer),D=x(()=>e.menuCollapse?48:e.menuWidth),d=x(()=>e.menuCollapse),l=x(()=>{const p=h.value&&!$.value?{paddingLeft:`${D.value}px`}:{},M=y.value?{paddingTop:_}:{};return{...p,...M}}),f=p=>{!n.value||e.updateSettings({menuCollapse:p})};de(()=>r.role,p=>{p&&!u.accessRouter(b)&&i.push({name:"notFound"})});const t=E(!1),c=()=>{t.value=!1};return ot("toggleDrawerMenu",()=>{t.value=!t.value}),pe(()=>{n.value=!0}),(p,M)=>{const L=Ze,k=et,U=tt,I=nt;return v(),C(I,{class:re(["layout",{mobile:m(e).hideMenu}])},{default:s(()=>[m(y)?(v(),B("div",rn,[o(Ft)])):R("",!0),o(I,null,{default:s(()=>[o(I,null,{default:s(()=>[m(h)?Ye((v(),C(L,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:m(d),collapsible:!0,width:m(D),style:ne({paddingTop:m(y)?"60px":""}),"hide-trigger":!0,onCollapse:f},{default:s(()=>[g("div",ln,[o(J)])]),_:1},8,["collapsed","width","style"])),[[Xe,!m($)]]):R("",!0),m($)?(v(),C(k,{key:1,visible:t.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:c},{default:s(()=>[o(J)]),_:1},8,["visible"])):R("",!0),o(I,{class:"layout-content",style:ne(m(l))},{default:s(()=>[m(e).tabBar?(v(),C(tn,{key:0})):R("",!0),o(U,null,{default:s(()=>[o(un)]),_:1}),m(S)?(v(),C(Pt,{key:1})):R("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});const Dn=F(dn,[["__scopeId","data-v-a4864bc3"]]);export{Dn as default};
