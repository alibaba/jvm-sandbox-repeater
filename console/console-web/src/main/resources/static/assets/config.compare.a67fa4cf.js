import{e as j,_ as G}from"./index.70bdb397.js";/* empty css              *//* empty css                */import{d as T,e as c,r as V,B as v,aD as k,aG as o,aH as e,aM as B,aW as M,bF as H,bM as K,bx as P,by as W,bL as J,bD as O,aK as Q,C as X,u as x,aE as A,l as Y,aV as Z,c4 as ee,c5 as te}from"./arco.46b62ede.js";import{j as oe,k as ae}from"./app.fdbaf873.js";import{u as ue}from"./loading.f82ebe9b.js";import{_ as R}from"./compare.global.ignore.vue_vue_type_script_setup_true_lang.d19cfd0f.js";/* empty css                *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css              *//* empty css               */import"./chart.42ea7243.js";import"./vue.4bab78c1.js";import"./base.3c7b4f95.js";const ne={name:"SubInvokeIgnoreCompare"},ie=T({...ne,props:{data:{type:Array,default(){return[]}}},emits:["update:data"],setup(U,{emit:f}){const y=U;y.data.forEach((l,t)=>{l.id=t});const d=c(y.data),u=()=>{f("update:data",d.value)},N=[{title:"id",dataIndex:"id"},{title:"identity",dataIndex:"identity"},{title:"\u591A\u4E2A\u7528\u82F1\u6587\u9017\u53F7,\u9694\u5F00",dataIndex:"ignoreNodes"},{title:"\u64CD\u4F5C",slotName:"buttons"}],r=c(!1),n=c(!1),D=l=>{i.id=l.id,i.identity=l.identity,i.ignoreNodes=l.ignoreNodes,r.value=!0},I=(l,t,s)=>{d.value.splice(s,1),u()},_=c(),g=c(),C=()=>!0,m=()=>{_.value.validate(l=>{if(l!==void 0){r.value=!0;return}const s=d.value[i.id];s.classPattern=i.identity.trim(),s.ignoreNodes=i.ignoreNodes.trim().split(","),u()})},S=()=>{g.value.validate(l=>{if(l!==void 0){n.value=!0;return}const t=d.value,s=V({id:t.length,identity:p.identity.trim(),ignoreNodes:p.ignoreNodes.trim().split(",")});t.push(s),u()})},E=()=>{},i=V({id:0,identity:"",ignoreNodes:""}),p=V({identity:"",ignoreNodes:""});return(l,t)=>{const s=M,z=H,F=K,b=P,q=W,w=J,$=O;return v(),k($,{class:"general-card"},{default:o(()=>[e(s,{type:"primary",size:"mini",onClick:t[0]||(t[0]=()=>{n.value=!0})},{default:o(()=>[B("\u6DFB\u52A0")]),_:1}),e(z,{style:{"margin-top":"5px"},"row-key":"id",columns:N,data:d.value,pagination:{pageSize:200},size:"mini"},{buttons:o(({record:a,column:L,rowIndex:h})=>[e(s,{type:"outline",size:"mini",shape:"round",style:{"margin-right":"5px"},onClick:()=>{D(a)}},{default:o(()=>[B(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),e(s,{type:"outline",size:"mini",shape:"round",status:"danger",onClick:()=>{I(a,L,h)}},{default:o(()=>[B(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1},8,["data"]),e(w,{visible:r.value,"onUpdate:visible":t[3]||(t[3]=a=>r.value=a),"on-before-ok":C,title:"\u7F16\u8F91",width:1e3,onOk:m,onCancel:E},{default:o(()=>[e(q,{ref_key:"formRef",ref:_,model:i,layout:"vertical"},{default:o(()=>[e(b,{field:"identity",label:"identity",required:""},{default:o(()=>[e(F,{modelValue:i.identity,"onUpdate:modelValue":t[1]||(t[1]=a=>i.identity=a)},null,8,["modelValue"])]),_:1}),e(b,{field:"ignoreNodes",label:"\u5FFD\u7565\u6BD4\u5BF9\u7684\u8282\u70B9\uFF0C\u591A\u4E2A\u7528\u82F1\u6587\u9017\u53F7(,)\u9694\u5F00",required:""},{default:o(()=>[e(F,{modelValue:i.ignoreNodes,"onUpdate:modelValue":t[2]||(t[2]=a=>i.ignoreNodes=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"]),e(w,{visible:n.value,"onUpdate:visible":t[6]||(t[6]=a=>n.value=a),"on-before-ok":C,title:"\u65B0\u589E",width:1e3,onOk:S,onCancel:E},{default:o(()=>[e(q,{ref_key:"formRef2",ref:g,model:p,layout:"vertical"},{default:o(()=>[e(b,{field:"identity",label:"identity",required:""},{default:o(()=>[e(F,{modelValue:p.identity,"onUpdate:modelValue":t[4]||(t[4]=a=>p.identity=a)},null,8,["modelValue"])]),_:1}),e(b,{field:"ignoreNodes",label:"\u5FFD\u7565\u6BD4\u5BF9\u7684\u8282\u70B9\uFF0C\u591A\u4E2A\u7528\u82F1\u6587\u9017\u53F7(,)\u9694\u5F00",required:""},{default:o(()=>[e(F,{modelValue:p.ignoreNodes,"onUpdate:modelValue":t[5]||(t[5]=a=>p.ignoreNodes=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])]),_:1})}}}),le={class:"container"},se={name:"CompareConfig"},de=T({...se,setup(U){const{loading:f,setLoading:y}=ue(!0),d=j(),u=c({ignoreCompareNodes:[],subInvokeToCompare:[],subInvokeIgnoreCompareNodes:[]});d.appName&&oe(d.appName).then(r=>{u.value=r.data,y(!1)});const N=()=>{const r={appName:d.appName,env:"all",appCompareConfig:Y(u.value)};ae(r).then(n=>{Z.success("\u4FDD\u5B58\u6210\u529F")})};return(r,n)=>{const D=Q("Breadcrumb"),I=M,_=ee,g=te,C=O;return v(),X("div",le,[e(D,{items:["menu.user","menu.user.config.compare"]},null,8,["items"]),e(C,{class:"general-card",title:"\u5BF9\u6BD4\u914D\u7F6E"},{default:o(()=>[e(I,{type:"primary",size:"small",onClick:N},{default:o(()=>[B("\u4FDD\u5B58")]),_:1}),e(g,{"default-active-key":["0","1","2","3"]},{default:o(()=>[e(_,{key:"0",header:"\u5168\u5C40\u5FFD\u7565\u6BD4\u5BF9"},{default:o(()=>[x(f)?A("",!0):(v(),k(R,{key:0,data:u.value.ignoreCompareNodes,"onUpdate:data":n[0]||(n[0]=m=>u.value.ignoreCompareNodes=m),name:"\u8282\u70B9",title:"\u5FFD\u7565\u6BD4\u5BF9\u7684\u8282\u70B9",placeholder:"$.server_time"},null,8,["data"]))]),_:1}),e(_,{key:"1",header:"\u5B50\u8C03\u7528\u5FFD\u7565\u6BD4\u5BF9\u8282\u70B9"},{default:o(()=>[x(f)?A("",!0):(v(),k(ie,{key:0,data:u.value.subInvokeIgnoreCompareNodes,"onUpdate:data":n[1]||(n[1]=m=>u.value.subInvokeIgnoreCompareNodes=m)},null,8,["data"]))]),_:1}),e(_,{key:"2",header:"\u9700\u8981\u5BF9\u6BD4\u7684\u5B50\u8C03\u7528"},{default:o(()=>[x(f)?A("",!0):(v(),k(R,{key:0,data:u.value.subInvokeToCompare,"onUpdate:data":n[2]||(n[2]=m=>u.value.subInvokeToCompare=m),name:"identity",title:"\u5B50\u8C03\u7528identity"},null,8,["data"]))]),_:1})]),_:1})]),_:1})])}}});const Ve=G(de,[["__scopeId","data-v-277d5e7f"]]);export{Ve as default};
